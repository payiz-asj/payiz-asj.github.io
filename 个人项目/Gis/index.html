<!DOCTYPE html>


<html lang="zh-CN">
  

    <head>
      <meta charset="utf-8" />
       
      <meta name="keywords" content="YeYing,Blog,å¤œèº,åšå®¢,å¤œèºæ‚ åŸ,yeying.tech,www.yeying.tech" />
       
      <meta name="description" content="æŒ‘ç¯å¤œæˆ˜ï¼Œå¸¸é—»å¤œèºæ‚ åŸ...åœç¬”å…±é¸£...æ‚²å£®ã€åšå®šï¼&lt;br&gt;å¿ƒé…¸èƒŒåæ€»æœ‰å€¼å¾—åšæŒçš„ç†ç”±ğŸ’ªè¯·åšæŒï¼&lt;br&gt; çæƒœèº«è¾¹çš„äººï¼ å°å¿«yä½ â¤" />
      
      <meta
        name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1"
      />
      <title>Gis |  å¤œèºæ‚ åŸ</title>
  <meta name="generator" content="hexo-theme-ayer">
      
      <link rel="shortcut icon" href="/favicon.ico" />
       
<link rel="stylesheet" href="/dist/main.css">

      <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/gh/Shen-Yu/cdn/css/remixicon.min.css"
      />
      
<link rel="stylesheet" href="/css/custom.css">
 
      <script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>
       
 

      <!-- mermaid -->
      
    <link rel="alternate" href="/atom.xml" title="å¤œèºæ‚ åŸ" type="application/atom+xml">
</head>
  </html>
</html>


<body>
  <div id="app">
    
      
    <main class="content on">
      <section class="outer">
  
<article
  id="post-Gis"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h1 class="article-title sea-center" style="border-left:0" itemprop="name">
  Gis
</h1>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/%E4%B8%AA%E4%BA%BA%E9%A1%B9%E7%9B%AE/Gis/" class="article-date">
  <time datetime="2020-12-20T09:39:26.000Z" itemprop="datePublished">2020-12-20</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E4%B8%AA%E4%BA%BA%E9%A1%B9%E7%9B%AE/">ä¸ªäººé¡¹ç›®</a>
  </div>
  
<div class="word_count">
    <span class="post-time">
        <span class="post-meta-item-icon">
            <i class="ri-quill-pen-line"></i>
            <span class="post-meta-item-text"> å­—æ•°ç»Ÿè®¡:</span>
            <span class="post-count">5.9k</span>
        </span>
    </span>

    <span class="post-time">
        &nbsp; | &nbsp;
        <span class="post-meta-item-icon">
            <i class="ri-book-open-line"></i>
            <span class="post-meta-item-text"> é˜…è¯»æ—¶é•¿â‰ˆ</span>
            <span class="post-count">26 åˆ†é’Ÿ</span>
        </span>
    </span>
</div>
 
    </div>
      
    <div class="tocbot"></div>




  
    <div class="article-entry" itemprop="articleBody">
       
  <h3 id="é¡¹ç›®ä»‹ç»ï¼š"><a href="#é¡¹ç›®ä»‹ç»ï¼š" class="headerlink" title="é¡¹ç›®ä»‹ç»ï¼š"></a>é¡¹ç›®ä»‹ç»ï¼š</h3><p>â€‹        å—åœ°æµ·å­¦é™¢Gisä¸“ä¸šæœ‹å‹å§”æ‰˜ï¼Œåšäº†ä¸€ä¸ªè§£æã€åˆ†æGisæ•°æ®çš„è„šæœ¬ï¼Œç”¨æ¥è§£æRINEXæ ¼å¼çš„å¯¼èˆªç”µæ–‡åˆ°å†…å­˜ä¸­ï¼ˆå­—å…¸ç±»å‹ï¼‰ï¼Œè®¡ç®—å…¶ä¸­æ‰€æœ‰å«æ˜Ÿåœ¨ç¬æ—¶åœ°çƒåæ ‡ç³»(WGS-84)ä¸­çš„ä½ç½®ï¼Œå¹¶å¯¼å‡ºåˆ°txtæˆ–jsonæ ¼å¼æ–‡ä»¶ã€‚</p>
<p>â€‹        é‡Œé¢ç”¨åˆ°çš„ç¬¬ä¸‰æ–¹åº“æœ‰os, sys, json,pandas,math,numpyã€‚</p>
<p>â€‹        æ•°æ®è§£æå‡½æ•°è¿”å›å€¼ä¸ºå­—å…¸æ ¼å¼æ•°æ®ã€‚æ•°æ®è§£æå®Œè¿˜å¯å¯¼å‡ºä¸ºtxt,jsonç­‰æ–‡ä»¶ã€‚</p>
<span id="more"></span>

<h3 id="ä»£ç ï¼ˆå·²åšå¥½éå¸¸è¯¦ç»†çš„æ³¨é‡Šï¼‰ï¼š"><a href="#ä»£ç ï¼ˆå·²åšå¥½éå¸¸è¯¦ç»†çš„æ³¨é‡Šï¼‰ï¼š" class="headerlink" title="ä»£ç ï¼ˆå·²åšå¥½éå¸¸è¯¦ç»†çš„æ³¨é‡Šï¼‰ï¼š"></a>ä»£ç ï¼ˆå·²åšå¥½éå¸¸è¯¦ç»†çš„æ³¨é‡Šï¼‰ï¼š</h3><h4 id="è§£æRINEXæ–‡ä»¶"><a href="#è§£æRINEXæ–‡ä»¶" class="headerlink" title="è§£æRINEXæ–‡ä»¶:"></a>è§£æRINEXæ–‡ä»¶:</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    æ‚¨å¥½ï¼</span></span><br><span class="line"><span class="string">    è¿™ä¸ªpythonæ–‡ä»¶, æ˜¯ç”¨æ¥è§£æRINEXæ–‡ä»¶çš„ï¼Œæä¾›äº†è§£æå¯¼èˆªç”µæ–‡æ–‡ä»¶(.N)å’Œå«æ˜Ÿè§‚æµ‹æ•°æ®æ–‡ä»¶(.O)</span></span><br><span class="line"><span class="string">    é‡Œé¢ç”¨åˆ°çš„ç¬¬ä¸‰æ–¹åº“æœ‰os, sys, json,ï¼ˆä¸ºäº†å‡½æ•°å¯ç§»æ¤æ€§ï¼Œå°†importå­—æ®µç›´æ¥æ”¾åˆ°å‡½æ•°é‡Œé¢äº†ï¼‰</span></span><br><span class="line"><span class="string">    æ•°æ®è§£æå‡½æ•°è¿”å›å€¼ä¸ºå­—å…¸æ ¼å¼æ•°æ®</span></span><br><span class="line"><span class="string">    æ•°æ®è§£æå®Œè¿˜å¯å¯¼å‡ºä¸ºtxt,jsonç­‰æ–‡ä»¶</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">read_navigation_data</span>(<span class="params">file_path: <span class="built_in">str</span></span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;è¯»å–å¹¶è§£æå¯¼èˆªç”µæ–‡æ–‡ä»¶&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># è¿™æ˜¯ä¸ªå†…éƒ¨å°å‡½æ•°ï¼Œä½œç”¨æ˜¯å°†RINEXæ–‡ä»¶æ ¼å¼ä¸­D19.12è§£æä¸ºæµ®ç‚¹æ•°</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">change_d19_12_to_float</span>(<span class="params">src</span>):</span></span><br><span class="line">        <span class="comment"># æ¯”å¦‚:-3.733104094863D-04</span></span><br><span class="line">        <span class="keyword">if</span> src[<span class="number">0</span>:<span class="number">2</span>] == <span class="string">&#x27;  &#x27;</span>:</span><br><span class="line">            qian = <span class="string">&#x27;0&#x27;</span></span><br><span class="line">        <span class="keyword">elif</span> src[<span class="number">0</span>:<span class="number">2</span>] == <span class="string">&#x27; -&#x27;</span>:</span><br><span class="line">            qian = <span class="string">&#x27;-0&#x27;</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            qian = src[<span class="number">0</span>:<span class="number">2</span>]</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">float</span>(qian + <span class="string">&#x27;.&#x27;</span> + src[<span class="number">3</span>:-<span class="number">4</span>] + <span class="string">&#x27;e&#x27;</span> + src[-<span class="number">3</span>:])</span><br><span class="line"></span><br><span class="line">    <span class="string">&quot;&quot;&quot;è¯»å–RINEXæ ¼å¼çš„GPSå¯¼èˆªç”µæ–‡æ–‡ä»¶ï¼Œä¿å­˜åˆ°ä¸€ä¸ªå­—å…¸è¿”å›&quot;&quot;&quot;</span></span><br><span class="line">    result = &#123;&#125;  <span class="comment"># è¿™æ˜¯è¿”å›ç»“æœçš„å­—å…¸</span></span><br><span class="line">    all_navigation_datas = []  <span class="comment"># è¿™æ˜¯ä¸ªåˆ—è¡¨ï¼Œé‡Œé¢æ˜¯æ‰€æœ‰å«æ˜Ÿçš„å¯¼èˆªç”µæ–‡æ•°æ®</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># å°†æ–‡ä»¶è¯»åˆ°åˆ—è¡¨ä¸­</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(file_path, <span class="string">&#x27;r&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        all_lines = <span class="built_in">list</span>(f.readlines())</span><br><span class="line">    <span class="comment"># print(all_lines)</span></span><br><span class="line">    <span class="comment"># å»æ‰æ¢è¡Œç¬¦&#x27;\n&#x27;</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(all_lines)):</span><br><span class="line">        all_lines[i] = all_lines[i].replace(<span class="string">&#x27;\n&#x27;</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">    <span class="comment"># æ‰¾åˆ°æ•°æ®éƒ¨åˆ†</span></span><br><span class="line">    data_start_line = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(all_lines)):</span><br><span class="line">        <span class="keyword">if</span> all_lines[i].find(<span class="string">&#x27;END OF HEADER&#x27;</span>) != -<span class="number">1</span>:</span><br><span class="line">            data_start_line = i + <span class="number">1</span></span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">    <span class="comment"># è®¡ç®—GPSå¯¼èˆªç”µæ–‡æ•°æ®çš„æ•°é‡</span></span><br><span class="line">    nums = <span class="built_in">int</span>((<span class="built_in">len</span>(all_lines) - data_start_line) / <span class="number">8</span>)</span><br><span class="line">    <span class="keyword">if</span> nums &lt; <span class="number">1</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;æœªæ‰¾åˆ°GPSå¯¼èˆªæ•°æ®ï¼Œè¯·æ£€æŸ¥æ–‡ä»¶æ ¼å¼æ˜¯å¦æ­£ç¡®ï¼&quot;</span>)</span><br><span class="line">        <span class="keyword">import</span> sys</span><br><span class="line">        sys.exit(-<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> one_nav_data <span class="keyword">in</span> <span class="built_in">range</span>(nums):</span><br><span class="line">        nav_data_dic = &#123;&#125;</span><br><span class="line">        nav_data_list = []</span><br><span class="line">        <span class="comment"># å…ˆè®°å½•ä¸€ä¸‹å¯¼èˆªç”µæ–‡çš„åºå·,æ ¼å¼ä¸Šè¡¥é½äº†å‰å¯¼0</span></span><br><span class="line">        nav_data_dic[<span class="string">&#x27;åºå·&#x27;</span>] = <span class="built_in">str</span>(one_nav_data + <span class="number">1</span>).zfill(<span class="built_in">len</span>(<span class="built_in">str</span>(nums)))</span><br><span class="line">        <span class="string">&quot;&quot;&quot; å¼€å§‹è§£ææ•°æ®åŒºåŸŸï¼&quot;&quot;&quot;</span></span><br><span class="line">        <span class="comment"># æŒ‰å«æ˜Ÿå’Œå‚è€ƒæ—¶åˆ»å­˜æ”¾å„é¢—å«æ˜Ÿçš„æ—¶é’Ÿå’Œè½¨é“æ•°æ®ã€‚</span></span><br><span class="line">        <span class="comment"># æ¯é¢—å«æ˜Ÿä¸€ä¸ªå‚è€ƒæ—¶åˆ»çš„æ•°æ®å 8è¡Œï¼Œç¬¬0è¡Œä¸ºè¯¥å«æ˜Ÿçš„PRNå·ã€å‚è€ƒæ—¶åˆ»ã€æ”¹æ­£æ¨¡å‹å‚æ•°ï¼Œ1-7è¡Œä¸ºè¯¥å«æ˜Ÿçš„å¹¿æ’­è½¨é“æ•°æ®ã€‚</span></span><br><span class="line">        <span class="comment"># ç”±äºå¯¼èˆªç”µæ–‡æ¯2hæ›´æ–°ä¾æ¬¡ï¼Œå› æ­¤ä¸€ä¸ªå¯¼èˆªç”µæ–‡æ–‡ä»¶åŒ…å«æŸå«æ˜Ÿå¤šä¸ªä¸åŒå‚è€ƒæ—¶åˆ»çš„æ•°æ®ã€‚</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot; æ˜ç™½äº†å—ï¼Ÿï¼ŒLet&#x27;s Go! &quot;&quot;&quot;</span></span><br><span class="line">        <span class="comment"># å°†8è¡Œå†…å®¹è¯»åˆ°ä¸€ä¸ªåˆ—è¡¨é‡Œ</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">8</span>):</span><br><span class="line">            nav_data_list.append(all_lines[data_start_line + <span class="number">8</span> * one_nav_data + i])</span><br><span class="line">        <span class="comment"># ä¸€ä¸ªå¯¼èˆªç”µæ–‡ä¸€å…±å°±8è¡Œï¼Œé™¤äº†ç¬¬ä¸€è¡Œç‰¹æ®Šå¤–ï¼Œå…¶ä»–7è¡Œéƒ½æ˜¯3X,4D19.12æ ¼å¼ï¼Œå› æ­¤ï¼Œç”¨å¾ªç¯å³å¯å¤§å¤§å‡å°‘ä»£ç é‡</span></span><br><span class="line">        <span class="comment"># ç¬¬0è¡Œï¼šPRNå·ï¼Œå†å…ƒï¼Œå«æ˜Ÿé’Ÿ</span></span><br><span class="line">        data_content = nav_data_list[<span class="number">0</span>]</span><br><span class="line">        nav_data_dic[<span class="string">&#x27;å«æ˜ŸPRNå·&#x27;</span>] = <span class="built_in">int</span>(data_content[<span class="number">0</span>:<span class="number">2</span>].replace(<span class="string">&#x27; &#x27;</span>, <span class="string">&#x27;&#x27;</span>).zfill(<span class="number">2</span>))  <span class="comment"># å¦‚æœæƒ³ä¿ç•™å‰å¯¼0ï¼Œå°±ä¸è¦ç±»å‹å¼ºåˆ¶è½¬æ¢</span></span><br><span class="line">        nav_data_dic[<span class="string">&#x27;å†å…ƒ&#x27;</span>] = data_content[<span class="number">2</span>:<span class="number">22</span>]</span><br><span class="line">        nav_data_dic[<span class="string">&#x27;å«æ˜Ÿé’Ÿçš„åå·®&#x27;</span>] = change_d19_12_to_float(data_content[<span class="number">22</span>:<span class="number">41</span>])</span><br><span class="line">        nav_data_dic[<span class="string">&#x27;å«æ˜Ÿé’Ÿæ¼‚ç§»&#x27;</span>] = change_d19_12_to_float(data_content[<span class="number">41</span>:<span class="number">60</span>])</span><br><span class="line">        nav_data_dic[<span class="string">&#x27;å«æ˜Ÿé’Ÿæ¼‚ç§»é€Ÿåº¦&#x27;</span>] = change_d19_12_to_float(data_content[<span class="number">60</span>:<span class="number">79</span>])</span><br><span class="line">        <span class="comment"># ç¬¬1-7è¡Œï¼šå¹¿æ’­è½¨é“1-7</span></span><br><span class="line">        broadcast_tracks = [</span><br><span class="line">            [<span class="string">&#x27;IODE&#x27;</span>, <span class="string">&#x27;Crs&#x27;</span>, <span class="string">&#x27;n&#x27;</span>, <span class="string">&#x27;M0&#x27;</span>],</span><br><span class="line">            [<span class="string">&#x27;Cuc&#x27;</span>, <span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;Cus&#x27;</span>, <span class="string">&#x27;sqrt(A)&#x27;</span>],</span><br><span class="line">            [<span class="string">&#x27;TOE&#x27;</span>, <span class="string">&#x27;Cic&#x27;</span>, <span class="string">&#x27;OMEGA&#x27;</span>, <span class="string">&#x27;Cis&#x27;</span>],</span><br><span class="line">            [<span class="string">&#x27;i0&#x27;</span>, <span class="string">&#x27;Crc&#x27;</span>, <span class="string">&#x27;w&#x27;</span>, <span class="string">&#x27;OMEGA_DOT&#x27;</span>],</span><br><span class="line">            [<span class="string">&#x27;i&#x27;</span>, <span class="string">&#x27;L2_code&#x27;</span>, <span class="string">&#x27;GPS_week_num&#x27;</span>, <span class="string">&#x27;L2_P_code&#x27;</span>],</span><br><span class="line">            [<span class="string">&#x27;å«æ˜Ÿç²¾åº¦&#x27;</span>, <span class="string">&#x27;å«æ˜Ÿå¥åº·çŠ¶æ€&#x27;</span>, <span class="string">&#x27;TGD&#x27;</span>, <span class="string">&#x27;IODC&#x27;</span>],</span><br><span class="line">            [<span class="string">&#x27;ç”µæ–‡å‘é€æ—¶åˆ»&#x27;</span>, <span class="string">&#x27;æ‹ŸåˆåŒºé—´(h)&#x27;</span>, <span class="string">&#x27;å¤‡ç”¨1&#x27;</span>, <span class="string">&#x27;å¤‡ç”¨2&#x27;</span>]</span><br><span class="line">        ]</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">8</span>):</span><br><span class="line">            <span class="comment"># æ¯éš”19ä¸ªå­—ç¬¦åˆ†å‰²</span></span><br><span class="line">            data_content = nav_data_list[i][<span class="number">3</span>:<span class="number">79</span>]</span><br><span class="line">            data_content = [data_content[k:k + <span class="number">19</span>] <span class="keyword">for</span> k <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="built_in">len</span>(data_content), <span class="number">19</span>)]</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(data_content)):</span><br><span class="line">                nav_data_dic[broadcast_tracks[i - <span class="number">1</span>][j]] = change_d19_12_to_float(data_content[j])  <span class="comment"># ç”¨ä¸Šé¢çš„å¹¿æ’­è½¨é“åˆ—è¡¨è¿›è¡Œå­—å…¸çš„åˆ›å»º</span></span><br><span class="line"></span><br><span class="line">        all_navigation_datas.append(nav_data_dic)</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line">    <span class="comment"># è‡³æ­¤ï¼Œå·²å®Œæˆè¯»å–å¯¼èˆªç”µæ–‡å¹¶å­˜å‚¨åˆ°å†…å­˜ä¸­</span></span><br><span class="line">    <span class="comment"># print(all_navigation_datas)</span></span><br><span class="line">    result[<span class="string">&#x27;å¯¼èˆªç”µæ–‡æ–‡ä»¶&#x27;</span>] = all_navigation_datas</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">read_observation_data</span>(<span class="params">file_path: <span class="built_in">str</span></span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;è¯»å–å¹¶è§£æè§‚æµ‹æ•°å€¼æ–‡ä»¶&quot;&quot;&quot;</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;è¯»å–RINEXæ ¼å¼çš„è§‚æµ‹å€¼æ–‡ä»¶ï¼Œå¹¶è§£ææˆå­—å…¸è¿”å›&quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># å°†æ–‡ä»¶è¯»åˆ°åˆ—è¡¨ä¸­</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(file_path, <span class="string">&#x27;r&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        all_lines = <span class="built_in">list</span>(f.readlines())</span><br><span class="line">    <span class="comment"># print(all_lines)</span></span><br><span class="line">    <span class="comment"># å»æ‰æ¢è¡Œç¬¦&#x27;\n&#x27;</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(all_lines)):</span><br><span class="line">        all_lines[i] = all_lines[i].replace(<span class="string">&#x27;\n&#x27;</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="string">&quot;&quot;&quot;è§£æè§‚æµ‹å€¼æ•°æ®æ–‡ä»¶ï¼Œä¿å­˜åˆ°ä¸€ä¸ªå­—å…¸è¿”å›&quot;&quot;&quot;</span></span><br><span class="line">    result = &#123;&#125;  <span class="comment"># è¿™æ˜¯è¿”å›ç»“æœçš„å­—å…¸</span></span><br><span class="line">    all_observation_datas = []  <span class="comment"># è¿™æ˜¯ä¸ªåˆ—è¡¨ï¼Œé‡Œé¢æ˜¯æ‰€æœ‰å†å…ƒçš„è§‚æµ‹æ•°æ®</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># ä¸€ã€è§£æå¤´æ–‡ä»¶</span></span><br><span class="line">    <span class="comment"># 1. ç»Ÿè®¡è§‚æµ‹æ•°æ®ç±»å‹, å½“ç±»å‹å¤§äº9ä¸ªæ—¶ï¼Œè¶…å‡ºéƒ¨åˆ†å°†ç»­è¡Œå†™åœ¨ä¸‹nè¡Œï¼Œ</span></span><br><span class="line">    <span class="comment"># æ³¨æ„ï¼šç±»å‹æ•°é‡ç†è®ºä¸Šæœ€å¤§å¯ä¸º999999ç§ï¼Œå…¶å®ç°å®é‡Œæ²¡é‚£ä¹ˆå¤šï¼ŒRINEX 2.0 å®šä¹‰çš„ä¹Ÿå°±12ç§ï¼Œä¸è¿‡å’±ä¸æ€•ï¼Œæœ‰å¤šå°‘æå¤šå°‘~~</span></span><br><span class="line">    types_of_observ = &#123;&#125;</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(all_lines)):</span><br><span class="line">        <span class="keyword">if</span> all_lines[i].find(<span class="string">&#x27;TYPES OF OBSERV&#x27;</span>) != -<span class="number">1</span>:</span><br><span class="line">            types_line_content = all_lines[i]</span><br><span class="line">            data_num = <span class="built_in">int</span>(types_line_content[:<span class="number">6</span>].replace(<span class="string">&#x27; &#x27;</span>, <span class="string">&#x27;&#x27;</span>))</span><br><span class="line">            types_of_observ[<span class="string">&#x27;è§‚æµ‹ç±»å‹æ•°é‡&#x27;</span>] = data_num</span><br><span class="line">            <span class="comment"># è§‚æµ‹å€¼åˆ—è¡¨ï¼š</span></span><br><span class="line">            rows_of_types = data_num // <span class="number">9</span> <span class="keyword">if</span> data_num % <span class="number">9</span> == <span class="number">0</span> <span class="keyword">else</span> data_num // <span class="number">9</span> + <span class="number">1</span>  <span class="comment"># åˆ—è¡¨æ‰€å è¡Œæ•°</span></span><br><span class="line">            base_line_of_types = i  <span class="comment"># è®°å½•å½“å‰ä¸€è¡Œ</span></span><br><span class="line">            types_line_content = <span class="string">&#x27;&#x27;</span>  <span class="comment"># å…ˆæ¸…ç©º</span></span><br><span class="line">            <span class="keyword">for</span> row_num <span class="keyword">in</span> <span class="built_in">range</span>(rows_of_types):</span><br><span class="line">                types_line_content += all_lines[base_line_of_types][<span class="number">6</span>:<span class="number">60</span>]</span><br><span class="line">                base_line_of_types += <span class="number">1</span></span><br><span class="line">            types_line_content = types_line_content.split()  <span class="comment"># é’ˆå¯¹ç©ºæ ¼åˆ‡ç‰‡ï¼Œè¿™æ—¶types_line_contentå°†ä»strå˜æˆlist</span></span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(data_num):</span><br><span class="line">                types_of_observ[<span class="string">&#x27;è§‚æµ‹ç±»å‹&#x27;</span> + <span class="built_in">str</span>(j + <span class="number">1</span>)] = types_line_content[j]</span><br><span class="line">            <span class="comment"># å¤´æ–‡ä»¶å…¶ä»–ä¿¡æ¯ä¸ç”¨éå†ï¼Œç»Ÿè®¡å®Œæ•°æ®ç±»å‹å°±å¯ä»¥é€€å‡ºäº†</span></span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line">    <span class="comment"># äºŒã€è§£ææ•°æ®åŒºåŸŸï¼Œå³è§‚æµ‹æ•°æ®</span></span><br><span class="line">    datas_of_observ = &#123;&#125;</span><br><span class="line">    <span class="comment"># 1. å®šä½æ•°æ®åŒºåŸŸ</span></span><br><span class="line">    data_start_line = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(all_lines)):</span><br><span class="line">        <span class="keyword">if</span> all_lines[i].find(<span class="string">&#x27;END OF HEADER&#x27;</span>) != -<span class="number">1</span>:</span><br><span class="line">            data_start_line = i + <span class="number">1</span></span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">int</span>(<span class="built_in">len</span>(all_lines) - data_start_line) &lt; <span class="number">1</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;æœªæ‰¾åˆ°è§‚æµ‹å€¼æ•°æ®ï¼Œè¯·æ£€æŸ¥æ–‡ä»¶æ ¼å¼æ˜¯å¦æ­£ç¡®ï¼&quot;</span>)</span><br><span class="line">        <span class="keyword">import</span> sys</span><br><span class="line">        sys.exit(-<span class="number">1</span>)</span><br><span class="line">    <span class="comment"># 2. è§£ææ•°æ®åŒºåŸŸ</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot; å¼€å§‹è§£ææ•°æ®åŒºåŸŸï¼&quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># æŒ‰å†å…ƒä¾æ¬¡å­˜æ”¾è§‚æµ‹æ•°æ®æˆ–è§‚æµ‹è¿‡ç¨‹ä¸­å‘ç”Ÿçš„äº‹ä»¶ä¿¡æ¯</span></span><br><span class="line">    <span class="comment"># æ¯ä¸ªå†å…ƒçš„æ•°æ®åŒ…å«ä¸¤éƒ¨åˆ†ï¼š</span></span><br><span class="line">    <span class="comment"># 1. ç¬¬ä¸€éƒ¨åˆ†ï¼šæ¯ä¸ªå†å…ƒ/å«æ˜Ÿæˆ–äº‹ä»¶æ ‡å¿—ï¼Œé€šå¸¸ä¸ºç¬¬ä¸€è¡Œï¼Œ</span></span><br><span class="line">    <span class="comment"># æ³¨æ„ï¼šå½“å«æ˜Ÿæ•°é‡è¶…è¿‡12ï¼Œæˆ–æœ‰äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œä¼šæœ‰ç´§è·Ÿç€çš„å¤šè¡Œã€‚å«æ˜Ÿæ•°é‡ç†è®ºä¸Šæœ€å¤§å¯ä¸º999ä¸ªï¼Œä¸è¿‡ç°å®é‡Œæ²¡é‚£ä¹ˆå¤šï¼Œæœ€å¤šä¹Ÿå°±åå‡ ä¸ª</span></span><br><span class="line">    <span class="comment"># 2. ç¬¬äºŒéƒ¨åˆ†ï¼šè§‚æµ‹å€¼ï¼Œå­˜æ”¾è¯¥å†å…ƒæ‰€æœ‰å«æ˜Ÿæ‰€é‡‡é›†åˆ°çš„æ‰€æœ‰è§‚æµ‹å€¼ï¼Œæ‰€å è¡Œæ•°ä¸å«æ˜Ÿæ•°é‡ã€è§‚æµ‹å€¼ç±»å‹æ•°é‡æœ‰å…³ã€‚</span></span><br><span class="line">    <span class="comment"># æ³¨æ„ï¼šå½“è§‚æµ‹å€¼ç±»å‹æ•°é‡è¶…è¿‡5ç§æ—¶ï¼Œè¶…å‡ºéƒ¨åˆ†å°†ç»­è¡Œå†™åœ¨ä¸‹ä¸€è¡Œï¼Œè¿™æ˜¯å› ä¸ºä¸€è¡Œåªèƒ½æ”¾5ä¸ªæ•°æ®(80/16)ã€‚</span></span><br><span class="line">    <span class="comment"># 3. å¤‡æ³¨ï¼šå†å…ƒä¹‹é—´çš„æ—¶é—´é—´éš”åœ¨å¤´æ–‡ä»¶ä¸­INTERVALéƒ¨åˆ†æŒ‡å‡ºï¼Œé€šå¸¸ä¸ºè‹¥å¹²ç§’ï¼Œä¾‹å¦‚10sï¼Œ30s</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot; æ˜ç™½äº†å—ï¼Ÿï¼ŒLet&#x27;s Go! &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    Epoch_serial_number: <span class="built_in">int</span> = <span class="number">0</span>  <span class="comment"># æ¯ä¸ªå†å…ƒçš„åºå·</span></span><br><span class="line">    Epoch_serial_row: <span class="built_in">int</span> = data_start_line  <span class="comment"># æ¯ä¸ªå†å…ƒå¼€å§‹çš„è¡Œå·</span></span><br><span class="line">    <span class="keyword">while</span> Epoch_serial_row &lt; <span class="built_in">len</span>(all_lines):</span><br><span class="line">        <span class="comment"># o_dic = &#123;&#125;</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;æ¯æ¬¡è¿›å…¥è¿™ä¸ªå¾ªç¯ï¼Œéƒ½æ˜¯ä¸€ä¸ªæ–°çš„å†å…ƒ&quot;&quot;&quot;</span></span><br><span class="line">        <span class="comment"># 1. ç¬¬ä¸€éƒ¨åˆ†ï¼šæ¯ä¸ªå†å…ƒï¼Œäº‹ä»¶æ ‡å¿—ï¼Œå«æ˜Ÿæ•°é‡åŠåˆ—è¡¨</span></span><br><span class="line">        one_Epoch_dic = &#123;&#125;  <span class="comment"># è®°å½•ä¸€ä¸ªå†å…ƒæ•°æ®</span></span><br><span class="line">        part_one = all_lines[Epoch_serial_row]  <span class="comment"># è¿™æ˜¯ç¬¬ä¸€éƒ¨åˆ†çš„ä¸€è¡Œå­—ç¬¦ä¸²</span></span><br><span class="line">        Epoch_serial_number += <span class="number">1</span></span><br><span class="line">        one_Epoch_dic[<span class="string">&#x27;å†å…ƒåºå·&#x27;</span>] = Epoch_serial_number</span><br><span class="line">        one_Epoch_dic[<span class="string">&#x27;è§‚æµ‹å†å…ƒæ—¶åˆ»&#x27;</span>] = part_one[<span class="number">1</span>:<span class="number">26</span>]</span><br><span class="line">        one_Epoch_dic[<span class="string">&#x27;å†å…ƒæ ‡å¿—&#x27;</span>] = <span class="built_in">int</span>(part_one[<span class="number">28</span>:<span class="number">29</span>])</span><br><span class="line">        satellite_num = <span class="built_in">int</span>(part_one[<span class="number">29</span>:<span class="number">32</span>].strip(<span class="string">&#x27; &#x27;</span>))  <span class="comment"># å«æ˜Ÿæ•°é‡</span></span><br><span class="line">        one_Epoch_dic[<span class="string">&#x27;å«æ˜Ÿæ•°é‡&#x27;</span>] = satellite_num</span><br><span class="line">        satellites_observ_data = []  <span class="comment"># è®°å½•æ‰€æœ‰å«æ˜Ÿçš„æ‰€æœ‰æ•°æ®</span></span><br><span class="line">        <span class="comment"># å«æ˜Ÿåˆ—è¡¨ï¼š</span></span><br><span class="line">        <span class="comment"># å½“æ•°é‡å¤§äº12æ—¶ï¼Œè¶…å‡ºéƒ¨åˆ†å°†ç»­è¡Œå†™åœ¨ä¸‹nè¡Œï¼Œ</span></span><br><span class="line">        <span class="comment"># æ³¨æ„ï¼šå«æ˜Ÿæ•°é‡ç†è®ºä¸Šæœ€å¤§å¯ä¸º999ä¸ªï¼Œå…¶å®ç°å®é‡Œæ²¡é‚£ä¹ˆå¤šï¼Œæœ€å¤šä¹Ÿå°±åå‡ ä¸ªï¼Œä¸è¿‡å’±ä¸æ€•ï¼Œç»§ç»­æœ‰å¤šå°‘æå¤šå°‘~~</span></span><br><span class="line">        rows_of_satellites = satellite_num // <span class="number">12</span> <span class="keyword">if</span> satellite_num % <span class="number">12</span> == <span class="number">0</span> <span class="keyword">else</span> satellite_num // <span class="number">12</span> + <span class="number">1</span></span><br><span class="line">        base_line_of_sat = Epoch_serial_row  <span class="comment"># è®°å½•å½“å‰ä¸€è¡Œ</span></span><br><span class="line">        part_one = <span class="string">&#x27;&#x27;</span>  <span class="comment"># å…ˆæ¸…ç©º</span></span><br><span class="line">        <span class="keyword">for</span> row_num <span class="keyword">in</span> <span class="built_in">range</span>(rows_of_satellites):</span><br><span class="line">            part_one += all_lines[base_line_of_sat][<span class="number">32</span>:<span class="number">68</span>]</span><br><span class="line">            base_line_of_sat += <span class="number">1</span></span><br><span class="line">        part_one = [part_one[i:i + <span class="number">3</span>] <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="built_in">len</span>(part_one), <span class="number">3</span>)]  <span class="comment"># æ¯éš”ä¸‰ä¸ªå­—ç¬¦ä¸²åˆ‡ç‰‡ï¼Œè¿™ä¸ªæ–¹æ³•å¾ˆå®ç”¨ï¼Œè¯·å°½é‡æŒæ¡~~</span></span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(satellite_num):</span><br><span class="line">            one_satellite_dic = &#123;<span class="string">&#x27;å«æ˜Ÿ&#123;&#125;çš„PRNå·&#x27;</span>.<span class="built_in">format</span>(<span class="built_in">str</span>(j + <span class="number">1</span>)): part_one[j]&#125;  <span class="comment"># ä¸€ä¸ªå«æ˜Ÿä¸€ä¸ªæ–°çš„å­—å…¸</span></span><br><span class="line">            satellites_observ_data.append(one_satellite_dic)</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># 2. ç¬¬äºŒéƒ¨åˆ†ï¼šè§‚æµ‹å€¼ï¼Œå­˜æ”¾è¯¥å†å…ƒæ‰€æœ‰å«æ˜Ÿæ‰€é‡‡é›†åˆ°çš„æ‰€æœ‰è§‚æµ‹å€¼ï¼Œæ‰€å è¡Œæ•°ä¸å«æ˜Ÿæ•°é‡ã€è§‚æµ‹å€¼ç±»å‹æ•°é‡æœ‰å…³ã€‚</span></span><br><span class="line">        <span class="comment"># æ³¨æ„ï¼šå½“è§‚æµ‹å€¼ç±»å‹æ•°é‡è¶…è¿‡5ç§æ—¶ï¼Œè¶…å‡ºéƒ¨åˆ†å°†ç»­è¡Œå†™åœ¨ä¸‹ä¸€è¡Œï¼Œè¿™æ˜¯å› ä¸ºä¸€è¡Œåªèƒ½æ”¾5ä¸ªæ•°æ®(80/16)ã€‚ä¸è¿‡å’±è¿˜æ˜¯ä¸æ€•ï¼Œå¹²å°±å®Œäº†ï¼</span></span><br><span class="line">        <span class="comment"># 2.1 é€šè¿‡è§‚æµ‹ç±»å‹æ•°é‡ï¼Œè®¡ç®—æ¯ä¸ªå«æ˜Ÿçš„è§‚æµ‹æ•°æ®å å‡ è¡Œ</span></span><br><span class="line">        rows_of_each_satellite_data = types_of_observ[<span class="string">&#x27;è§‚æµ‹ç±»å‹æ•°é‡&#x27;</span>] // <span class="number">5</span> <span class="keyword">if</span> types_of_observ[<span class="string">&#x27;è§‚æµ‹ç±»å‹æ•°é‡&#x27;</span>] % <span class="number">5</span> == <span class="number">0</span> <span class="keyword">else</span> \</span><br><span class="line">            types_of_observ[<span class="string">&#x27;è§‚æµ‹ç±»å‹æ•°é‡&#x27;</span>] // <span class="number">5</span> + <span class="number">1</span></span><br><span class="line">        <span class="comment"># 2.2 éå†è¯¥å†å…ƒä¸‹æ‰€æœ‰å«æ˜Ÿï¼Œè¯»å–æ‰€æœ‰å«æ˜Ÿçš„è§‚æµ‹å€¼</span></span><br><span class="line">        base_line_of_data_type = base_line_of_sat  <span class="comment"># è®°å½•å½“å‰ä¸€è¡Œ</span></span><br><span class="line">        <span class="keyword">for</span> sn <span class="keyword">in</span> <span class="built_in">range</span>(satellite_num):</span><br><span class="line">            <span class="comment"># sn_PRN = satellites_observ_data[sn][&#x27;å«æ˜ŸPRNå·&#x27;]  # å½“å‰æ­£åœ¨å¤„ç†çš„å«æ˜Ÿçš„PRNå·</span></span><br><span class="line">            <span class="comment"># print(&#x27;å½“å‰è¯»å–æ•°æ®çš„å«æ˜Ÿå·&#x27;, sn_PRN)</span></span><br><span class="line">            <span class="string">&quot;&quot;&quot;å†æ¬¡ä½¿ç”¨ä¸Šé¢é‚£ä¸ªå‰å®³çš„ç®—æ³•ï¼ˆæ ¸å¿ƒï¼šå¾ªç¯+åˆ‡ç‰‡ï¼‰ï¼Œå¾ªç¯è¯»å–è¯¥å«æ˜Ÿæ‰€æœ‰è§‚æµ‹ç±»å‹çš„æ•°æ®~~&quot;&quot;&quot;</span></span><br><span class="line">            part_two = <span class="string">&#x27;&#x27;</span></span><br><span class="line">            <span class="keyword">for</span> row_num <span class="keyword">in</span> <span class="built_in">range</span>(rows_of_each_satellite_data):</span><br><span class="line">                temp = all_lines[base_line_of_data_type][<span class="number">0</span>:<span class="number">80</span>]</span><br><span class="line">                <span class="keyword">if</span> row_num &lt; rows_of_each_satellite_data - <span class="number">1</span>:</span><br><span class="line">                    <span class="keyword">if</span> <span class="built_in">len</span>(temp) == <span class="number">0</span>:</span><br><span class="line">                        <span class="keyword">for</span> jj <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>):</span><br><span class="line">                            part_two += <span class="string">&#x27;                &#x27;</span></span><br><span class="line">                    <span class="keyword">if</span> <span class="built_in">len</span>(temp) % <span class="number">16</span> == <span class="number">14</span>:</span><br><span class="line">                        part_two += temp + <span class="string">&#x27;  &#x27;</span></span><br><span class="line">                    <span class="keyword">elif</span> <span class="built_in">len</span>(temp) % <span class="number">16</span> == <span class="number">15</span>:</span><br><span class="line">                        part_two += temp + <span class="string">&#x27; &#x27;</span></span><br><span class="line">                    <span class="keyword">else</span>:</span><br><span class="line">                        part_two += temp</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    <span class="keyword">if</span> <span class="built_in">len</span>(temp) &lt; <span class="number">16</span>*(types_of_observ[<span class="string">&#x27;è§‚æµ‹ç±»å‹æ•°é‡&#x27;</span>] - row_num * <span class="number">5</span>) -<span class="number">2</span>:</span><br><span class="line">                        <span class="keyword">if</span> <span class="built_in">len</span>(temp) % <span class="number">16</span> == <span class="number">14</span>:</span><br><span class="line">                            temp += temp + <span class="string">&#x27;  &#x27;</span></span><br><span class="line">                        <span class="keyword">elif</span> <span class="built_in">len</span>(temp) % <span class="number">16</span> == <span class="number">15</span>:</span><br><span class="line">                            temp += temp + <span class="string">&#x27; &#x27;</span></span><br><span class="line">                        part_two += temp</span><br><span class="line">                        <span class="keyword">for</span> jj <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">int</span>(types_of_observ[<span class="string">&#x27;è§‚æµ‹ç±»å‹æ•°é‡&#x27;</span>]) - row_num * <span class="number">5</span>-<span class="built_in">len</span>(temp)//<span class="number">16</span>):</span><br><span class="line">                            part_two += <span class="string">&#x27;                &#x27;</span></span><br><span class="line">                    <span class="keyword">else</span>:</span><br><span class="line">                        <span class="keyword">if</span> <span class="built_in">len</span>(temp) % <span class="number">16</span> == <span class="number">14</span>:</span><br><span class="line">                            part_two += temp + <span class="string">&#x27;  &#x27;</span></span><br><span class="line">                        <span class="keyword">elif</span> <span class="built_in">len</span>(temp) % <span class="number">16</span> == <span class="number">15</span>:</span><br><span class="line">                            part_two += temp + <span class="string">&#x27; &#x27;</span></span><br><span class="line">                        <span class="keyword">else</span>:</span><br><span class="line">                            part_two += temp</span><br><span class="line">                base_line_of_data_type += <span class="number">1</span></span><br><span class="line">            dd = part_two</span><br><span class="line">            part_two = [part_two[i:i + <span class="number">16</span>] <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="built_in">len</span>(part_two), <span class="number">16</span>)]  <span class="comment"># æ¯éš”16ä¸ªå­—ç¬¦ä¸²åˆ‡ç‰‡ï¼Œæ¯ä¸€ä¸ªå¯¹åº”ä¸€ä¸ªè§‚æµ‹æ•°æ®(F14.3,I1,I1)</span></span><br><span class="line">            <span class="comment"># è¯»å–å®Œæ¯•ï¼Œé‚£å°±ç”¨ä¸€ä¸ªå¾ªç¯æŠŠæ•°æ®è®°åˆ°å­—å…¸é‡Œå§ï¼(å­—å…¸é‡Œæ·»åŠ æ–°å…ƒç´ )</span></span><br><span class="line">            <span class="keyword">for</span> each_type_num <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, types_of_observ[<span class="string">&#x27;è§‚æµ‹ç±»å‹æ•°é‡&#x27;</span>]):</span><br><span class="line">                <span class="keyword">try</span>:</span><br><span class="line">                    one_record = &#123;</span><br><span class="line">                        <span class="string">&#x27;è§‚æµ‹å€¼&#x27;</span>: <span class="string">&#x27;ç©º&#x27;</span> <span class="keyword">if</span> part_two[each_type_num][<span class="number">0</span>:<span class="number">14</span>] == <span class="string">&#x27;              &#x27;</span> <span class="keyword">else</span> <span class="built_in">float</span>(</span><br><span class="line">                            part_two[each_type_num][<span class="number">0</span>:<span class="number">14</span>].strip()),</span><br><span class="line">                        <span class="string">&#x27;LLIå¤±é”æ ‡è¯†ç¬¦&#x27;</span>: <span class="string">&#x27;ç©º&#x27;</span> <span class="keyword">if</span> part_two[each_type_num][<span class="number">14</span>] == <span class="string">&#x27; &#x27;</span> <span class="keyword">else</span> <span class="built_in">int</span>(</span><br><span class="line">                            part_two[each_type_num][<span class="number">14</span>]),</span><br><span class="line">                        <span class="string">&#x27;ä¿¡å·å¼ºåº¦&#x27;</span>: <span class="string">&#x27;ç©º&#x27;</span> <span class="keyword">if</span> part_two[each_type_num][<span class="number">15</span>] == <span class="string">&#x27; &#x27;</span> <span class="keyword">else</span> <span class="built_in">int</span>(</span><br><span class="line">                            part_two[each_type_num][<span class="number">15</span>])</span><br><span class="line">                    &#125;</span><br><span class="line">                    satellites_observ_data[sn][types_of_observ[<span class="string">&#x27;è§‚æµ‹ç±»å‹&#x27;</span> + <span class="built_in">str</span>(each_type_num + <span class="number">1</span>)]] = one_record</span><br><span class="line">                    <span class="comment"># print(types_of_observ[&#x27;è§‚æµ‹ç±»å‹&#x27; + str(each_type_num + 1)], &#x27; æœªå¤„ç†çš„è§‚æµ‹å€¼: &#x27;, part_two[each_type_num])  # æµ‹è¯•ç”¨</span></span><br><span class="line">                <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">                    <span class="built_in">print</span>(<span class="string">&#x27;æºæ–‡ä»¶æ ¼å¼é”™è¯¯ï¼Ÿè¯·æ£€æŸ¥æ–‡ä»¶&#123;&#125;çš„ç¬¬&#123;&#125;è¡Œé™„è¿‘æœ‰æ²¡æœ‰æ ¼å¼é”™è¯¯ï¼å…·ä½“é”™è¯¯ä»£ç ï¼š&#123;&#125;&#x27;</span>.<span class="built_in">format</span>(file_name, base_line_of_data_type-<span class="number">1</span>, e))</span><br><span class="line">            <span class="comment"># ä¸€ä¸ªå«æ˜Ÿç»“æŸ</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">        <span class="comment"># è‡³æ­¤ï¼Œä¸€ä¸ªå†å…ƒä¸‹æ‰€æœ‰å«æ˜Ÿçš„æ•°æ®è¯»å–å®Œæ¯•ï¼Œä¿å­˜ä¸€ä¸‹ï¼Œå°±è¿›å…¥ä¸‹ä¸€ä¸ªå†å…ƒæ¥ç€è¯»~~</span></span><br><span class="line">        one_Epoch_dic[<span class="string">&#x27;æ‰€æœ‰å«æ˜Ÿæ•°æ®&#x27;</span>] = satellites_observ_data</span><br><span class="line">        all_observation_datas.append(one_Epoch_dic)</span><br><span class="line">        Epoch_serial_row = base_line_of_data_type</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line">    <span class="comment"># è‡³æ­¤ï¼Œå·²å®Œæˆè¯»å–å«æ˜Ÿè§‚æµ‹æ•°æ®å¹¶å­˜å‚¨åˆ°å†…å­˜ä¸­</span></span><br><span class="line">    <span class="comment"># print(all_observation_datas)</span></span><br><span class="line">    result[<span class="string">&#x27;å«æ˜Ÿè§‚æµ‹æ•°æ®æ–‡ä»¶&#x27;</span>] = all_observation_datas</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">write_dict_to_file</span>(<span class="params">dict_data, file_path, file_name</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;å°†è¯»åˆ°å†…å­˜ä¸­çš„å­—å…¸ç±»å‹æ•°æ®ä¿å­˜åˆ°å„ç§æ–‡ä»¶ä¸­&quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># ç›®å‰åªå†™äº†txtå’Œjsonä¸¤ç§æ ¼å¼</span></span><br><span class="line">    <span class="keyword">import</span> os</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(file_path):</span><br><span class="line">        os.makedirs(file_path)</span><br><span class="line">    output_type = file_name.split(<span class="string">&#x27;.&#x27;</span>)[-<span class="number">1</span>]</span><br><span class="line">    <span class="keyword">if</span> output_type == <span class="string">&#x27;txt&#x27;</span>:</span><br><span class="line">        <span class="comment"># txtæ–‡ä»¶</span></span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(file_path + file_name, <span class="string">&#x27;w&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f_c:</span><br><span class="line">            f_c.write(<span class="built_in">str</span>(dict_data))</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="comment"># jsonæ–‡ä»¶</span></span><br><span class="line">        <span class="keyword">import</span> json</span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(file_path + file_name.replace(file_name.split(<span class="string">&#x27;.&#x27;</span>)[-<span class="number">1</span>], <span class="string">&#x27;&#x27;</span>) + <span class="string">&#x27;json&#x27;</span>, <span class="string">&#x27;w&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">            json.dump(dict_data, f, indent=<span class="number">4</span>, ensure_ascii=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="comment"># è§£æRINEXæ ¼å¼çš„å¯¼èˆªç”µæ–‡å’Œå«æ˜Ÿè§‚æµ‹æ•°æ®åˆ°å†…å­˜ä¸­ï¼ˆå­—å…¸ç±»å‹ï¼‰ï¼Œå¹¶å¯¼å‡ºåˆ°txtæˆ–jsonæ ¼å¼æ–‡ä»¶</span></span><br><span class="line">    <span class="comment"># æ‰“æ‹›å‘¼</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Hello, è¿™ä¸ªç¨‹åºçš„ä½œç”¨æ˜¯ï¼š\nè§£æRINEXæ ¼å¼çš„å¯¼èˆªç”µæ–‡å’Œå«æ˜Ÿè§‚æµ‹æ•°æ®åˆ°å†…å­˜ä¸­ï¼ˆå­—å…¸ç±»å‹ï¼‰ï¼Œå¹¶å¯¼å‡ºåˆ°txtæˆ–jsonæ ¼å¼æ–‡ä»¶&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;\n-------------------------- è¿™æ˜¯ä¸€ä¸ªåˆ†å‰²çº¿ --------------------------------\n&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># è§£æå¯¼èˆªç”µæ–‡æ–‡ä»¶</span></span><br><span class="line">    file_name = <span class="built_in">input</span>(<span class="string">&quot;è¾“å…¥è¦è§£æçš„å¯¼èˆªç”µæ–‡æ–‡ä»¶åœ°å€å’Œåå­—ï¼š(ä¾‹å¦‚ï¼š./åŸå§‹æ•°æ®/00052731.98N)\n&quot;</span>)</span><br><span class="line">    nav_data = read_navigation_data(file_name)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># æ‰“å°æ•°æ®</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;è§£æå®Œæ¯•ï¼Œæ˜¯å¦éœ€è¦æ‰“å°åˆ°æ§åˆ¶å°(1ï¼šæ˜¯  2ï¼š å¦)&quot;</span>)</span><br><span class="line">    is_print = <span class="built_in">input</span>(<span class="string">&quot;è¯·è¾“å…¥æ‚¨çš„é€‰æ‹©ï¼š&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> is_print == <span class="string">&quot;1&quot;</span>:</span><br><span class="line">        <span class="built_in">print</span>(nav_data)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å¯¼å‡ºæ•°æ®</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;æ˜¯å¦éœ€è¦ä¿å­˜åˆ°æ–‡ä»¶(1ï¼šæ˜¯  2ï¼š å¦)&quot;</span>)</span><br><span class="line">    is_write = <span class="built_in">input</span>(<span class="string">&quot;è¯·è¾“å…¥æ‚¨çš„é€‰æ‹©ï¼š&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> is_write == <span class="string">&quot;1&quot;</span>:</span><br><span class="line">        path = <span class="built_in">input</span>(<span class="string">&quot;ä¿å­˜åœ°å€ï¼š(ä¾‹å¦‚ï¼š./è§£æç»“æœ/)\n&quot;</span>)</span><br><span class="line">        name = file_name.split(<span class="string">&#x27;/&#x27;</span>)[-<span class="number">1</span>]</span><br><span class="line">        write_dict_to_file(nav_data, path, name + <span class="string">&#x27;.txt&#x27;</span>)</span><br><span class="line">        write_dict_to_file(nav_data, path, name + <span class="string">&#x27;.json&#x27;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;ä¿å­˜å®Œæ¯•ï¼Œç»“æœå·²ä¿å­˜åˆ°ï¼š&quot;</span>, path)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;\n-------------------------- è¿™æ˜¯ä¸€ä¸ªåˆ†å‰²çº¿ --------------------------------\n&quot;</span>)</span><br><span class="line">    <span class="comment"># è§£æå«æ˜Ÿè§‚æµ‹æ•°æ®æ–‡ä»¶ï¼Œç”¨æˆ·äº¤äº’èœå•åŒä¸Š</span></span><br><span class="line">    file_name = <span class="built_in">input</span>(<span class="string">&quot;è¾“å…¥è¦è§£æçš„å«æ˜Ÿè§‚æµ‹æ•°æ®æ–‡ä»¶åœ°å€å’Œåå­—ï¼š(ä¾‹å¦‚ï¼š./åŸå§‹æ•°æ®/00052731.98O)\n&quot;</span>)</span><br><span class="line">    obs_data = read_observation_data(file_name)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># æ‰“å°æ•°æ®</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;è§£æå®Œæ¯•ï¼Œæ˜¯å¦éœ€è¦æ‰“å°åˆ°æ§åˆ¶å°(1ï¼šæ˜¯  2ï¼š å¦)&quot;</span>)</span><br><span class="line">    is_print2 = <span class="built_in">input</span>(<span class="string">&quot;è¯·è¾“å…¥æ‚¨çš„é€‰æ‹©ï¼š&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> is_print2 == <span class="string">&quot;1&quot;</span>:</span><br><span class="line">        <span class="built_in">print</span>(obs_data)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å¯¼å‡ºæ•°æ®</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;æ˜¯å¦éœ€è¦ä¿å­˜åˆ°æ–‡ä»¶(1ï¼šæ˜¯  2ï¼š å¦)&quot;</span>)</span><br><span class="line">    is_write2 = <span class="built_in">input</span>(<span class="string">&quot;è¯·è¾“å…¥æ‚¨çš„é€‰æ‹©ï¼š&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> is_write2 == <span class="string">&quot;1&quot;</span>:</span><br><span class="line">        path = <span class="built_in">input</span>(<span class="string">&quot;ä¿å­˜åœ°å€ï¼š(ä¾‹å¦‚ï¼š./è§£æç»“æœ/)\n&quot;</span>)</span><br><span class="line">        name = file_name.split(<span class="string">&#x27;/&#x27;</span>)[-<span class="number">1</span>]</span><br><span class="line">        write_dict_to_file(obs_data, path, name + <span class="string">&#x27;.txt&#x27;</span>)</span><br><span class="line">        write_dict_to_file(obs_data, path, name + <span class="string">&#x27;.json&#x27;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;ä¿å­˜å®Œæ¯•ï¼Œç»“æœå·²ä¿å­˜åˆ°ï¼š&quot;</span>, path)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;\n-------------------------- è¿™æ˜¯ä¸€ä¸ªåˆ†å‰²çº¿ --------------------------------\n&quot;</span>)</span><br><span class="line">    <span class="comment"># ç»“æŸè¯­</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;å¾ˆé«˜å…´ä¸ºæ‚¨æœåŠ¡ï¼Œä¸‹æ¬¡å†è§~~&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h4 id="è®¡ç®—å«æ˜Ÿä½ç½®"><a href="#è®¡ç®—å«æ˜Ÿä½ç½®" class="headerlink" title="è®¡ç®—å«æ˜Ÿä½ç½®:"></a>è®¡ç®—å«æ˜Ÿä½ç½®:</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*- </span></span><br><span class="line"><span class="comment"># @Author: PAYIZ</span></span><br><span class="line"><span class="comment"># @project: GPSå«æ˜Ÿä½ç½®çš„è®¡ç®—</span></span><br><span class="line"><span class="comment"># @File : è®¡ç®—å«æ˜Ÿä½ç½®.py</span></span><br><span class="line"><span class="comment"># @Time : 2020/12/20 21:30</span></span><br><span class="line"><span class="comment"># éœ€è¦å®‰è£…ç¬¬ä¸‰æ–¹åº“ï¼Ÿè¯•è¯•è¿™ä¸ªè¯­å¥(ä½¿ç”¨æ¸…åé•œåƒæº)ï¼špip --default-timeout=100 install -i https://pypi.tuna.tsinghua.edu.cn/simple name</span></span><br><span class="line"><span class="comment"># -----------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    æ‚¨å¥½ï¼</span></span><br><span class="line"><span class="string">    è¿™ä¸ªpythonæ–‡ä»¶, æ˜¯ç”¨æ¥è§£æRINEXæ ¼å¼çš„å¯¼èˆªç”µæ–‡åˆ°å†…å­˜ä¸­ï¼ˆå­—å…¸ç±»å‹ï¼‰ï¼Œ</span></span><br><span class="line"><span class="string">    è®¡ç®—å…¶ä¸­æ‰€æœ‰å«æ˜Ÿåœ¨ç¬æ—¶åœ°çƒåæ ‡ç³»(WGS-84)ä¸­çš„ä½ç½®ï¼Œå¹¶å¯¼å‡ºåˆ°txtæˆ–jsonæ ¼å¼æ–‡ä»¶</span></span><br><span class="line"><span class="string">    é‡Œé¢ç”¨åˆ°çš„ç¬¬ä¸‰æ–¹åº“æœ‰os, sys, json,pandas,mathï¼ˆä¸ºäº†å‡½æ•°å¯ç§»æ¤æ€§ï¼Œå°†æœ‰äº›importå­—æ®µç›´æ¥æ”¾åˆ°å‡½æ•°é‡Œé¢äº†ï¼‰</span></span><br><span class="line"><span class="string">    æ•°æ®è§£æå‡½æ•°è¿”å›å€¼ä¸ºå­—å…¸æ ¼å¼æ•°æ®</span></span><br><span class="line"><span class="string">    æ•°æ®è§£æå®Œè¿˜å¯å¯¼å‡ºä¸ºtxt,jsonç­‰æ–‡ä»¶</span></span><br><span class="line"><span class="string">    æ³¨æ„ï¼šæœ¬æ–‡ä»¶è¿˜ç”¨åˆ°äº†æˆ‘è‡ªå·±å†™çš„ è§£æRINEXæ–‡ä»¶.py æ–‡ä»¶ä¸­çš„å‡½æ•°ï¼š read_navigation_data</span></span><br><span class="line"><span class="string">    è‹¥æ— è¯¥æ–‡ä»¶è¯·è”ç³»æœ¬äººè·å–ï¼Œè°¢è°¢ï¼</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> math</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> è§£æRINEXæ–‡ä»¶ <span class="keyword">import</span> read_navigation_data</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">calculation_of_gps_satellite_position</span>(<span class="params">file_path</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;è¯»å–å¯¼èˆªç”µæ–‡å¹¶è§£æï¼Œè¿™ä¸€éƒ¨åˆ†è°ƒç”¨äº† â€è§£æRINEXæ–‡ä»¶.pyâ€œ ä»£ç æ–‡ä»¶é‡Œé¢çš„å‡½æ•°&quot;&quot;&quot;</span></span><br><span class="line">    nav_file = read_navigation_data(file_path)</span><br><span class="line">    nav_data = nav_file[<span class="string">&#x27;å¯¼èˆªç”µæ–‡æ–‡ä»¶&#x27;</span>]</span><br><span class="line">    <span class="comment"># å®šä¹‰ä¸€äº›å¸¸é‡</span></span><br><span class="line">    e_E = <span class="number">1</span> / <span class="number">298.257223563</span>  <span class="comment"># åœ°çƒæ‰ç‡ï¼š</span></span><br><span class="line">    OMEGA_E = <span class="number">7.292115</span> * <span class="number">10</span> ** (-<span class="number">5</span>)  <span class="comment"># åœ°çƒè‡ªè½¬è§’é€Ÿåº¦ï¼šrad/s</span></span><br><span class="line">    GM = <span class="number">3.9860044</span> * <span class="number">10</span> ** <span class="number">14</span>  <span class="comment"># åœ°å¿ƒå¼•åŠ›å¸¸æ•°ï¼š m3/s2</span></span><br><span class="line">    c = <span class="number">299792458</span>  <span class="comment"># çœŸç©ºä¸­çš„å…‰é€Ÿï¼šm/s</span></span><br><span class="line"></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    # è¿™é‡Œæ˜¯å¯¼èˆªç”µæ–‡è§£æå®Œä¿å­˜æˆå­—å…¸é‡Œé¢çš„å¹¿æ’­è½¨é“ä¿¡æ¯,ä¸ºäº†å†™ä»£ç ã€è¯»ä»£ç æ–¹é¢å°±ä»¥æ³¨é‡Šçš„æ–¹å¼æ”¾åœ¨æ­¤å¤„</span></span><br><span class="line"><span class="string">    broadcast_tracks = [</span></span><br><span class="line"><span class="string">        [&#x27;IODE&#x27;, &#x27;Crs&#x27;, &#x27;n&#x27;, &#x27;M0&#x27;],</span></span><br><span class="line"><span class="string">        [&#x27;Cuc&#x27;, &#x27;e&#x27;, &#x27;Cus&#x27;, &#x27;sqrt(A)&#x27;],</span></span><br><span class="line"><span class="string">        [&#x27;TOE&#x27;, &#x27;Cic&#x27;, &#x27;OMEGA&#x27;, &#x27;Cis&#x27;],</span></span><br><span class="line"><span class="string">        [&#x27;i0&#x27;, &#x27;Crc&#x27;, &#x27;w&#x27;, &#x27;OMEGA_DOT&#x27;],</span></span><br><span class="line"><span class="string">        [&#x27;i&#x27;, &#x27;L2_code&#x27;, &#x27;GPS_week_num&#x27;, &#x27;L2_P_code&#x27;],</span></span><br><span class="line"><span class="string">        [&#x27;å«æ˜Ÿç²¾åº¦&#x27;, &#x27;å«æ˜Ÿå¥åº·çŠ¶æ€&#x27;, &#x27;TGD&#x27;, &#x27;IODC&#x27;],</span></span><br><span class="line"><span class="string">        [&#x27;ç”µæ–‡å‘é€æ—¶åˆ»&#x27;, &#x27;æ‹ŸåˆåŒºé—´(h)&#x27;, &#x27;å¤‡ç”¨1&#x27;, &#x27;å¤‡ç”¨2&#x27;]</span></span><br><span class="line"><span class="string">    ]</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># å¾ªç¯è®¡ç®—è§‚æµ‹åˆ°çš„å«æ˜Ÿçš„ä½ç½®ï¼Œç»“æœä¾ç„¶ä¿å­˜åˆ°ä¸€ä¸ªå­—å…¸é‡Œ</span></span><br><span class="line">    result = &#123;&#125;  <span class="comment"># è¿™æ˜¯è¿”å›ç»“æœçš„å­—å…¸</span></span><br><span class="line">    all_satellites_positions = []  <span class="comment"># è¿™æ˜¯ä¸ªåˆ—è¡¨ï¼Œé‡Œé¢æ˜¯æ‰€æœ‰å«æ˜Ÿçš„ä½ç½®æ•°æ®</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> one_satellite <span class="keyword">in</span> nav_data:</span><br><span class="line">        <span class="comment"># print(one_satellite)</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># 1. è®¡ç®—å«æ˜Ÿè¿åŠ¨çš„å¹³å‡è§’é€Ÿåº¦n</span></span><br><span class="line">        square_A = one_satellite[<span class="string">&#x27;sqrt(A)&#x27;</span>]</span><br><span class="line">        n0 = math.sqrt(GM) / (square_A ** <span class="number">3</span>)</span><br><span class="line">        n = n0 + one_satellite[<span class="string">&#x27;n&#x27;</span>]</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 2. è®¡ç®—è§‚æµ‹ç¬é—´å«æ˜Ÿçš„å¹³è¿‘ç‚¹è§’M</span></span><br><span class="line">        <span class="comment"># 2.1 è®¡ç®—ç¦»è¯¥å†å…ƒçš„å‰å‘¨æ—¥é›¶ç‚¹çš„æ—¶é—´å·®tï¼Œå³å‘¨å†…ç§’æ•°</span></span><br><span class="line">        Epoch_list = [one_satellite[<span class="string">&#x27;å†å…ƒ&#x27;</span>][i:i + <span class="number">3</span>] <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="built_in">len</span>(one_satellite[<span class="string">&#x27;å†å…ƒ&#x27;</span>]), <span class="number">3</span>)]</span><br><span class="line">        Epoch = &#123;</span><br><span class="line">            <span class="string">&#x27;year&#x27;</span>: <span class="built_in">int</span>(<span class="string">&#x27;19&#x27;</span> + Epoch_list[<span class="number">0</span>].strip()) <span class="keyword">if</span> <span class="number">80</span> &lt;= <span class="built_in">int</span>(Epoch_list[<span class="number">0</span>]) &lt;= <span class="number">99</span> <span class="keyword">else</span> <span class="built_in">int</span>(</span><br><span class="line">                <span class="string">&#x27;20&#x27;</span> + Epoch_list[<span class="number">0</span>].strip()),</span><br><span class="line">            <span class="string">&#x27;month&#x27;</span>: <span class="built_in">int</span>(Epoch_list[<span class="number">1</span>]),</span><br><span class="line">            <span class="string">&#x27;day&#x27;</span>: <span class="built_in">int</span>(Epoch_list[<span class="number">2</span>]),</span><br><span class="line">            <span class="string">&#x27;hour&#x27;</span>: <span class="built_in">int</span>(Epoch_list[<span class="number">3</span>]),</span><br><span class="line">            <span class="string">&#x27;min&#x27;</span>: <span class="built_in">int</span>(Epoch_list[<span class="number">4</span>]),</span><br><span class="line">            <span class="string">&#x27;sec&#x27;</span>: <span class="built_in">float</span>(Epoch_list[<span class="number">5</span>] + Epoch_list[<span class="number">6</span>])</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment"># 2.1.1 è®¡ç®—è¯¥å†å…ƒæ˜¯æ˜ŸæœŸå‡ </span></span><br><span class="line">        <span class="keyword">import</span> datetime</span><br><span class="line">        which_one = datetime.date(Epoch[<span class="string">&quot;year&quot;</span>], Epoch[<span class="string">&#x27;month&#x27;</span>], Epoch[<span class="string">&#x27;day&#x27;</span>]).weekday()</span><br><span class="line">        <span class="comment"># week_days = [&#x27;Monday&#x27;, &#x27;Tuesday&#x27;, &#x27;Wednesday&#x27;, &#x27;Thursday&#x27;, &#x27;Friday&#x27;, &#x27;Saturday&#x27;, &#x27;Sunday&#x27;]</span></span><br><span class="line">        <span class="comment"># date_name = week_days[which_one]   # æµ‹è¯•ç”¨</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># 2.1.2 è®¡ç®—å‘¨å†…ç§’æ•°t</span></span><br><span class="line">        t = ((which_one + <span class="number">1</span>) * <span class="number">24</span> + Epoch[<span class="string">&#x27;hour&#x27;</span>]) * <span class="number">3600</span> + Epoch[<span class="string">&#x27;min&#x27;</span>] * <span class="number">60</span> + Epoch[<span class="string">&#x27;sec&#x27;</span>]</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 2.2 é€šè¿‡å…¬å¼è®¡ç®—å«æ˜Ÿçš„å¹³è¿‘ç‚¹è§’M</span></span><br><span class="line">        TOE = one_satellite[<span class="string">&#x27;TOE&#x27;</span>]</span><br><span class="line">        M = one_satellite[<span class="string">&#x27;M0&#x27;</span>] + n * (t - TOE)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 3. è®¡ç®—åè¿‘ç‚¹è§’ E</span></span><br><span class="line">        e = one_satellite[<span class="string">&#x27;e&#x27;</span>]</span><br><span class="line"></span><br><span class="line">        <span class="comment"># ç”¨å¼§åº¦è¡¨ç¤ºçš„å¼€æ™®å‹’æ–¹ç¨‹</span></span><br><span class="line">        <span class="comment"># E = M + e * math.sin(M)</span></span><br><span class="line">        <span class="comment"># è¿­ä»£æ³•è®¡ç®—ä¸Šè¿°æ–¹ç¨‹</span></span><br><span class="line">        E: <span class="built_in">float</span> = <span class="number">0</span></span><br><span class="line">        Ek = M</span><br><span class="line">        <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">            Ek1 = Ek + e * math.sin(Ek)</span><br><span class="line">            <span class="keyword">if</span> math.fabs(Ek1 - Ek) &lt;= <span class="number">1e-12</span>:</span><br><span class="line">                E = Ek1  <span class="comment"># å°†ç»“æœå­˜åˆ°E,é€€å‡ºå¾ªç¯</span></span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="comment"># print(&#x27;ç°åœ¨äºŒè€…ç›¸å·®ï¼š&#x27;, math.fabs(Ek1 - Ek))  # æµ‹è¯•ç”¨</span></span><br><span class="line">                Ek = Ek1  <span class="comment"># ç»§ç»­è¿­ä»£</span></span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># 4. è®¡ç®—çœŸè¿‘ç‚¹è§’f</span></span><br><span class="line">        f = math.atan2(math.sqrt(<span class="number">1</span> - e * e) * math.sin(E), (math.cos(E) - e))</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 5. è®¡ç®—å‡äº¤è·è§’u&#x27;, åœ¨è¿™é‡Œå‘½åä¸ºu_pie</span></span><br><span class="line">        u_pie = one_satellite[<span class="string">&#x27;w&#x27;</span>] + f</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 6. è®¡ç®—æ‘„åŠ¨æ”¹æ­£é¡¹Î´_uã€Î´_rã€Î´_i , è¿™é‡Œå‘½åæ—¶å‰ç¼€ç”¨deltaè¡¨ç¤º</span></span><br><span class="line">        delta_u = one_satellite[<span class="string">&#x27;Cuc&#x27;</span>] * math.cos(<span class="number">2</span> * u_pie) + one_satellite[<span class="string">&#x27;Cus&#x27;</span>] * math.sin(<span class="number">2</span> * u_pie)</span><br><span class="line">        delta_r = one_satellite[<span class="string">&#x27;Crc&#x27;</span>] * math.cos(<span class="number">2</span> * u_pie) + one_satellite[<span class="string">&#x27;Crs&#x27;</span>] * math.sin(<span class="number">2</span> * u_pie)</span><br><span class="line">        delta_i = one_satellite[<span class="string">&#x27;Cic&#x27;</span>] * math.cos(<span class="number">2</span> * u_pie) + one_satellite[<span class="string">&#x27;Cis&#x27;</span>] * math.sin(<span class="number">2</span> * u_pie)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 7. å¯¹u&#x27;ã€r&#x27;ã€i0è¿›è¡Œæ‘„åŠ¨æ”¹æ­£</span></span><br><span class="line">        u = u_pie + delta_u</span><br><span class="line">        r = square_A ** <span class="number">2</span> * (<span class="number">1</span> - e * math.cos(E)) + delta_r</span><br><span class="line">        i = one_satellite[<span class="string">&#x27;i0&#x27;</span>] + delta_i + one_satellite[<span class="string">&#x27;i&#x27;</span>] * (t - TOE)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 8. è®¡ç®—å«æ˜Ÿåœ¨è½¨é“é¢åæ ‡ç³»ä¸­çš„ä½ç½®</span></span><br><span class="line">        x = r * math.cos(u)</span><br><span class="line">        y = r * math.sin(u)</span><br><span class="line">        z = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># 9.è®¡ç®—è§‚æµ‹ç¬é—´å‡äº¤ç‚¹çš„ç²¾åº¦L</span></span><br><span class="line">        L = one_satellite[<span class="string">&#x27;OMEGA&#x27;</span>] + one_satellite[<span class="string">&#x27;OMEGA_DOT&#x27;</span>] * (t - TOE) - OMEGA_E * t</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 10. è®¡ç®—å«æ˜Ÿåœ¨ç¬æ—¶åœ°çƒåæ ‡ç³»(WGS-84)ä¸­çš„ä½ç½®</span></span><br><span class="line">        coordinate_wgs_84 = &#123;</span><br><span class="line">            <span class="string">&#x27;X&#x27;</span>: x * math.cos(L) - y * math.cos(i) * math.sin(L),</span><br><span class="line">            <span class="string">&#x27;Y&#x27;</span>: x * math.sin(L) - y * math.cos(i) * math.cos(L),</span><br><span class="line">            <span class="string">&#x27;Z&#x27;</span>: y * math.sin(i)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 11. è®¡ç®—å«æ˜Ÿåœ¨åè®®åœ°çƒåæ ‡ç³»ä¸­çš„ä½ç½®(è€ƒè™‘æç§»çš„å½±å“),å¾—å‡ºcoordinate_cts:conventional terrestrial system</span></span><br><span class="line">        <span class="comment"># æç§»å‚æ•°é‡‡ç”¨äº†å›½é™…åœ°çƒè‡ªè½¬å’Œå‚è€ƒç³»ç»ŸæœåŠ¡ï¼ˆç½‘å€ï¼šhttp://www.iers.orgï¼‰æä¾›çš„ç¾å›½æµ·å†›å¤©æ–‡å°å’Œæ³•å›½å·´é»å¤©æ–‡å°çš„åœ°æç§»åŠ¨é¢„æµ‹ç»“æœ</span></span><br><span class="line">        <span class="comment"># æ‰¾åˆ°2020å¹´12æœˆå‘è¡¨çš„æ ‡å‡†å‚æ•°ï¼Œå¹¶åªå–äº†2020å…¨å¹´çš„å¹³å‡å€¼ 0.049,0.032</span></span><br><span class="line">        <span class="comment"># éœ€è¦æ›´ç²¾ç¡®çš„è¯è¯·è‡ªè¡Œæ”¹æˆç›®æ ‡å¹´ä»½ç›®æ ‡æ—¥æœŸçš„åœ°æå‚æ•°ï¼ˆæˆ‘ä¸æƒ³å®ç°äº†ï¼Œå› ä¸ºæ²¡æœ‰æ‰¾åˆ°å¾€å¹´çš„å‚æ•°ï¼‰</span></span><br><span class="line">        <span class="comment"># å¦‚éœ€æ›´ç²¾ç¡®çš„æ–¹æ³•ï¼Œè¯·å‚è€ƒITRSå’ŒITRF</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># polar coordinates xp, yp</span></span><br><span class="line">        xp = <span class="number">0.049</span></span><br><span class="line">        yp = <span class="number">0.032</span></span><br><span class="line"></span><br><span class="line">        coordinate_cts = &#123;</span><br><span class="line">            <span class="string">&#x27;X&#x27;</span>: coordinate_wgs_84[<span class="string">&#x27;X&#x27;</span>] + coordinate_wgs_84[<span class="string">&#x27;Z&#x27;</span>] * xp,</span><br><span class="line">            <span class="string">&#x27;Y&#x27;</span>: coordinate_wgs_84[<span class="string">&#x27;Y&#x27;</span>] - coordinate_wgs_84[<span class="string">&#x27;Z&#x27;</span>] * yp,</span><br><span class="line">            <span class="string">&#x27;Z&#x27;</span>: (-<span class="number">1</span>) * coordinate_wgs_84[<span class="string">&#x27;X&#x27;</span>] * xp + coordinate_wgs_84[<span class="string">&#x27;Y&#x27;</span>] * yp + coordinate_wgs_84[<span class="string">&#x27;Z&#x27;</span>]</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment"># print(&#x27;å½“å‰è¢«è®¡ç®—çš„å«æ˜Ÿï¼š&#x27;, one_satellite[&#x27;å«æ˜ŸPRNå·&#x27;], one_satellite[&#x27;å†å…ƒ&#x27;])</span></span><br><span class="line">        <span class="comment"># print(&#x27;è®¡ç®—å«æ˜Ÿåœ¨ç¬æ—¶åœ°çƒåæ ‡ç³»(WGS-84)ä¸­çš„ä½ç½®ï¼š&#x27;, coordinate_wgs_84)</span></span><br><span class="line">        <span class="comment"># print(&#x27;å«æ˜Ÿåœ¨åè®®åœ°çƒåæ ‡ç³»ä¸­çš„ä½ç½®ï¼š&#x27;, coordinate_cts, &#x27;\n&#x27;)</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># è¿”å›ç»“æœ</span></span><br><span class="line">        <span class="comment"># å› ä¸ºè€å¸ˆåªè¦æ±‚ç¬æ—¶åœ°çƒåæ ‡ç³»(WGS-84)ä¸­çš„ä½ç½®ï¼Œå› æ­¤å°±åªè¿”å›è¿™ä¸ª</span></span><br><span class="line">        <span class="comment"># å› ä¸ºå¯¼èˆªç”µæ–‡æ¯éš”2hå‘ä¸€æ¬¡ï¼Œå› æ­¤æ¯é¢—å«æ˜Ÿä¼šæœ‰å¤šä¸ªä½ç½®ä¿¡æ¯</span></span><br><span class="line">        one_satellite_positions = &#123;</span><br><span class="line">            <span class="string">&#x27;å«æ˜ŸPRNå·&#x27;</span>: one_satellite[<span class="string">&#x27;å«æ˜ŸPRNå·&#x27;</span>],</span><br><span class="line">            <span class="string">&#x27;æ‰€æœ‰ä½ç½®&#x27;</span>: [</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="string">&#x27;å†å…ƒ&#x27;</span>: one_satellite[<span class="string">&#x27;å†å…ƒ&#x27;</span>],</span><br><span class="line">                    <span class="string">&#x27;WGS-84åæ ‡ç³»ä½ç½®&#x27;</span>: coordinate_wgs_84</span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment"># çŠ¶æ€æ ‡å¿—</span></span><br><span class="line">        flag = <span class="number">0</span>  <span class="comment"># 0ï¼š é»˜è®¤æ— è¯¥å«æ˜Ÿ</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> all_satellites_positions:</span><br><span class="line">            <span class="keyword">if</span> i[<span class="string">&#x27;å«æ˜ŸPRNå·&#x27;</span>] == one_satellite_positions[<span class="string">&#x27;å«æ˜ŸPRNå·&#x27;</span>]:</span><br><span class="line">                flag = <span class="number">1</span></span><br><span class="line">                <span class="keyword">for</span> j <span class="keyword">in</span> i[<span class="string">&#x27;æ‰€æœ‰ä½ç½®&#x27;</span>]:</span><br><span class="line">                    <span class="keyword">if</span> j[<span class="string">&#x27;å†å…ƒ&#x27;</span>] == one_satellite_positions[<span class="string">&#x27;æ‰€æœ‰ä½ç½®&#x27;</span>][<span class="number">0</span>][<span class="string">&#x27;å†å…ƒ&#x27;</span>]:</span><br><span class="line">                        <span class="comment"># å­˜åœ¨è¯¥å«æ˜ŸåŠè¯¥å†å…ƒæ—¶ä½ç½®ï¼Œå¤„ç†æ–¹å¼ï¼šè·³è¿‡</span></span><br><span class="line">                        flag = <span class="number">2</span></span><br><span class="line">                        <span class="keyword">break</span></span><br><span class="line">                <span class="keyword">if</span> flag == <span class="number">1</span>:</span><br><span class="line">                    <span class="comment"># å­˜åœ¨è¯¥å«æ˜Ÿä½†æ²¡æœ‰è¯¥å†å…ƒæ—¶ä½ç½®ï¼Œå¤„ç†æ–¹å¼ï¼šæ·»åŠ æ–°çš„ä½ç½®</span></span><br><span class="line">                    i[<span class="string">&#x27;æ‰€æœ‰ä½ç½®&#x27;</span>].append(one_satellite_positions[<span class="string">&#x27;æ‰€æœ‰ä½ç½®&#x27;</span>][<span class="number">0</span>])</span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">        <span class="keyword">if</span> flag == <span class="number">0</span>:</span><br><span class="line">            <span class="comment"># æ²¡æ‰¾åˆ°è¯¥å«æ˜Ÿçš„ä½ç½®è®°å½•ï¼Œå¤„ç†æ–¹å¼ï¼šæ·»åŠ è¯¥å«æ˜Ÿçš„è®°å½•</span></span><br><span class="line">            all_satellites_positions.append(one_satellite_positions)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># break  # è¿™ä¸ªåœé¡¿æ˜¯æµ‹è¯•æ—¶ç”¨çš„</span></span><br><span class="line">    <span class="comment"># è‡³æ­¤ï¼Œå·²å®Œæˆè¯»å–å«æ˜Ÿä½ç½®çš„è®¡ç®—å¹¶å­˜å‚¨åˆ°å†…å­˜ä¸­</span></span><br><span class="line">    result[<span class="string">&#x27;æ‰€æœ‰å«æ˜Ÿåœ¨ç¬æ—¶åœ°çƒåæ ‡ç³»(WGS-84)ä¸­çš„ä½ç½®&#x27;</span>] = all_satellites_positions</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">write_dict_to_file</span>(<span class="params">dict_data, file_path, file_name</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;å°†è¯»åˆ°å†…å­˜ä¸­çš„å­—å…¸ç±»å‹æ•°æ®ä¿å­˜åˆ°å„ç§æ–‡ä»¶ä¸­&quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># ç›®å‰åªå†™äº†txtå’Œjsonä¸¤ç§æ ¼å¼</span></span><br><span class="line">    <span class="keyword">import</span> os</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(file_path):</span><br><span class="line">        os.makedirs(file_path)</span><br><span class="line">    output_type = file_name.split(<span class="string">&#x27;.&#x27;</span>)[-<span class="number">1</span>]</span><br><span class="line">    <span class="keyword">if</span> output_type == <span class="string">&#x27;txt&#x27;</span>:</span><br><span class="line">        <span class="comment"># txtæ–‡ä»¶</span></span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(file_path + file_name, <span class="string">&#x27;w&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f_c:</span><br><span class="line">            f_c.write(<span class="built_in">str</span>(dict_data))</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="comment"># jsonæ–‡ä»¶</span></span><br><span class="line">        <span class="keyword">import</span> json</span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(file_path + file_name.replace(file_name.split(<span class="string">&#x27;.&#x27;</span>)[-<span class="number">1</span>], <span class="string">&#x27;&#x27;</span>) + <span class="string">&#x27;json&#x27;</span>, <span class="string">&#x27;w&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">            json.dump(dict_data, f, indent=<span class="number">4</span>, ensure_ascii=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="comment"># è§£æRINEXæ ¼å¼çš„å¯¼èˆªç”µæ–‡åˆ°å†…å­˜ä¸­ï¼ˆå­—å…¸ç±»å‹ï¼‰ï¼Œè®¡ç®—å…¶ä¸­æ‰€æœ‰å«æ˜Ÿåœ¨ç¬æ—¶åœ°çƒåæ ‡ç³»(WGS-84)ä¸­çš„ä½ç½®ï¼Œå¹¶å¯¼å‡ºåˆ°txtæˆ–jsonæ ¼å¼æ–‡ä»¶</span></span><br><span class="line">    <span class="comment"># æ‰“æ‹›å‘¼</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Hello, è¿™ä¸ªç¨‹åºçš„ä½œç”¨æ˜¯ï¼š\nè§£æRINEXæ ¼å¼çš„å¯¼èˆªç”µæ–‡åˆ°å†…å­˜ä¸­ï¼ˆå­—å…¸ç±»å‹ï¼‰ï¼Œè®¡ç®—å…¶ä¸­æ‰€æœ‰å«æ˜Ÿåœ¨ç¬æ—¶åœ°çƒåæ ‡ç³»(WGS-84)ä¸­çš„ä½ç½®ï¼Œå¹¶å¯¼å‡ºåˆ°txtæˆ–jsonæ ¼å¼æ–‡ä»¶&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;\n-------------------------- è¿™æ˜¯ä¸€ä¸ªåˆ†å‰²çº¿ --------------------------------\n&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># è§£æå¯¼èˆªç”µæ–‡æ–‡ä»¶</span></span><br><span class="line">    file_name = <span class="built_in">input</span>(<span class="string">&quot;è¾“å…¥è¦è§£æçš„å¯¼èˆªç”µæ–‡æ–‡ä»¶åœ°å€å’Œåå­—ï¼š(ä¾‹å¦‚ï¼š./åŸå§‹æ•°æ®/00052731.98N)\n&quot;</span>)</span><br><span class="line">    positions = calculation_of_gps_satellite_position(file_name)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># æ‰“å°æ•°æ®</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;è§£æå®Œæ¯•ï¼Œæ˜¯å¦éœ€è¦æ‰“å°åˆ°æ§åˆ¶å°(1ï¼šæ˜¯  2ï¼š å¦)&quot;</span>)</span><br><span class="line">    is_print = <span class="built_in">input</span>(<span class="string">&quot;è¯·è¾“å…¥æ‚¨çš„é€‰æ‹©ï¼š&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> is_print == <span class="string">&quot;1&quot;</span>:</span><br><span class="line">        <span class="built_in">print</span>(positions)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å¯¼å‡ºæ•°æ®</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;æ˜¯å¦éœ€è¦ä¿å­˜åˆ°æ–‡ä»¶(1ï¼šæ˜¯  2ï¼š å¦)&quot;</span>)</span><br><span class="line">    is_write = <span class="built_in">input</span>(<span class="string">&quot;è¯·è¾“å…¥æ‚¨çš„é€‰æ‹©ï¼š&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> is_write == <span class="string">&quot;1&quot;</span>:</span><br><span class="line">        path = <span class="built_in">input</span>(<span class="string">&quot;ä¿å­˜åœ°å€ï¼š(ä¾‹å¦‚ï¼š./å«æ˜Ÿä½ç½®è®¡ç®—ç»“æœ/)\n&quot;</span>)</span><br><span class="line">        name = file_name.split(<span class="string">&#x27;/&#x27;</span>)[-<span class="number">1</span>]</span><br><span class="line">        write_dict_to_file(positions, path, name + <span class="string">&#x27;.txt&#x27;</span>)</span><br><span class="line">        write_dict_to_file(positions, path, name + <span class="string">&#x27;.json&#x27;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;ä¿å­˜å®Œæ¯•ï¼Œç»“æœå·²ä¿å­˜åˆ°ï¼š&quot;</span>, path)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;\n-------------------------- è¿™æ˜¯ä¸€ä¸ªåˆ†å‰²çº¿ --------------------------------\n&quot;</span>)</span><br><span class="line">    <span class="comment"># ç»“æŸè¯­</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;å¾ˆé«˜å…´ä¸ºæ‚¨æœåŠ¡ï¼Œä¸‹æ¬¡å†è§~~&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h4 id="æœ€åè®¡ç®—ç»“æœå±•ç¤ºï¼š"><a href="#æœ€åè®¡ç®—ç»“æœå±•ç¤ºï¼š" class="headerlink" title="æœ€åè®¡ç®—ç»“æœå±•ç¤ºï¼š"></a>æœ€åè®¡ç®—ç»“æœå±•ç¤ºï¼š</h4><p><img align = "center" src = "https://pic.imgdb.cn/item/610911475132923bf81111cf.png" style = "with:580px; height:400px"></img></p>
<h3 id="FAQ"><a href="#FAQ" class="headerlink" title="FAQ"></a>FAQ</h3><p>â€‹        æœ¬è„šæœ¬èƒ½å¤Ÿå¤„ç†ä»»ä½•RENIXæ ¼å¼æ–‡ä»¶ï¼Œè€Œä¸”é²æ£’æ€§æå¼ºï¼Œèƒ½å¤Ÿåº”å¯¹æ–‡ä»¶æ ¼å¼çš„ä»»ä½•å˜åŒ–ã€‚</p>
<p>â€‹        å¦‚æœä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿ä¸æˆ‘è®¨è®ºï¼</p>
<h3 id="é¡¹ç›®æºä»£ç "><a href="#é¡¹ç›®æºä»£ç " class="headerlink" title="é¡¹ç›®æºä»£ç "></a>é¡¹ç›®æºä»£ç </h3><p>â€‹        æœ¬é¡¹ç›®å·²å¼€æºï¼Œ<a target="_blank" rel="noopener" href="https://github.com/payiz-asj/Gis">é¡¹ç›®åœ°å€</a>ã€‚æ¬¢è¿è®¿é—®æˆ‘çš„<a target="_blank" rel="noopener" href="https://github.com/payiz-asj">Github</a>äº†è§£æ›´å¤šæœ‰æ„æ€çš„é¡¹ç›®ï¼</p>
 
      <!-- reward -->
      
      <div id="reword-out">
        <div id="reward-btn">
          æ‰“èµ
        </div>
      </div>
      
    </div>
    

    <!-- copyright -->
    
    <div class="declare">
      <ul class="post-copyright">
        <li>
          <i class="ri-copyright-line"></i>
          <strong>ç‰ˆæƒå£°æ˜ï¼š </strong>
          
          æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œè‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼
          
        </li>
      </ul>
    </div>
    
    <footer class="article-footer">
       
<div class="share-btn">
      <span class="share-sns share-outer">
        <i class="ri-share-forward-line"></i>
        åˆ†äº«
      </span>
      <div class="share-wrap">
        <i class="arrow"></i>
        <div class="share-icons">
          
          <a class="weibo share-sns" href="javascript:;" data-type="weibo">
            <i class="ri-weibo-fill"></i>
          </a>
          <a class="weixin share-sns wxFab" href="javascript:;" data-type="weixin">
            <i class="ri-wechat-fill"></i>
          </a>
          <a class="qq share-sns" href="javascript:;" data-type="qq">
            <i class="ri-qq-fill"></i>
          </a>
          <a class="douban share-sns" href="javascript:;" data-type="douban">
            <i class="ri-douban-line"></i>
          </a>
          <!-- <a class="qzone share-sns" href="javascript:;" data-type="qzone">
            <i class="icon icon-qzone"></i>
          </a> -->
          
          <a class="facebook share-sns" href="javascript:;" data-type="facebook">
            <i class="ri-facebook-circle-fill"></i>
          </a>
          <a class="twitter share-sns" href="javascript:;" data-type="twitter">
            <i class="ri-twitter-fill"></i>
          </a>
          <a class="google share-sns" href="javascript:;" data-type="google">
            <i class="ri-google-fill"></i>
          </a>
        </div>
      </div>
</div>

<div class="wx-share-modal">
    <a class="modal-close" href="javascript:;"><i class="ri-close-circle-line"></i></a>
    <p>æ‰«ä¸€æ‰«ï¼Œåˆ†äº«åˆ°å¾®ä¿¡</p>
    <div class="wx-qrcode">
      <img src="//api.qrserver.com/v1/create-qr-code/?size=150x150&data=https://yeying.tech/%E4%B8%AA%E4%BA%BA%E9%A1%B9%E7%9B%AE/Gis/" alt="å¾®ä¿¡åˆ†äº«äºŒç»´ç ">
    </div>
</div>

<div id="share-mask"></div>  
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Gis/" rel="tag">Gis</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/" rel="tag">python</a></li></ul>

    </footer>
  </div>

   
  <nav class="article-nav">
    
      <a href="/%E4%B8%AA%E4%BA%BA%E9%A1%B9%E7%9B%AE/NJU-FOOTBALL/" class="article-nav-link">
        <strong class="article-nav-caption">ä¸Šä¸€ç¯‡</strong>
        <div class="article-nav-title">
          
            NJU è¶³çƒèµ›ç¨‹ç®¡ç†ç³»ç»Ÿ
          
        </div>
      </a>
    
    
      <a href="/%E4%B8%AA%E4%BA%BA%E9%A1%B9%E7%9B%AE/baidu-pic/" class="article-nav-link">
        <strong class="article-nav-caption">ä¸‹ä¸€ç¯‡</strong>
        <div class="article-nav-title">ç™¾åº¦å›¾ç‰‡ä¸‹è½½å™¨</div>
      </a>
    
  </nav>

   
<!-- valineè¯„è®º -->
<div id="vcomments-box">
  <div id="vcomments"></div>
</div>
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/valine@1.4.14/dist/Valine.min.js"></script>
<script>
  new Valine({
    el: "#vcomments",
    app_id: "",
    app_key: "",
    path: window.location.pathname,
    avatar: "monsterid",
    placeholder: "ç»™æˆ‘çš„æ–‡ç« åŠ ç‚¹è¯„è®ºå§~",
    recordIP: true,
  });
  const infoEle = document.querySelector("#vcomments .info");
  if (infoEle && infoEle.childNodes && infoEle.childNodes.length > 0) {
    infoEle.childNodes.forEach(function (item) {
      item.parentNode.removeChild(item);
    });
  }
</script>
<style>
  #vcomments-box {
    padding: 5px 30px;
  }

  @media screen and (max-width: 800px) {
    #vcomments-box {
      padding: 5px 0px;
    }
  }

  #vcomments-box #vcomments {
    background-color: #fff;
  }

  .v .vlist .vcard .vh {
    padding-right: 20px;
  }

  .v .vlist .vcard {
    padding-left: 10px;
  }
</style>

 
   
     
</article>


</section>
      <footer class="footer">
  <div class="outer">
    <ul>
      <li>
        Copyrights &copy;
        2019-2021
        <i class="ri-heart-fill heart_icon"></i> PAYIZ
      </li>
    </ul>
    <ul>
      <li>
        
        
        <span>
  <span><i class="ri-user-3-fill"></i><span id="busuanzi_value_site_uv"></span></span>
  <span class="division">|</span>
  <span><i class="ri-eye-fill"></i><span id="busuanzi_value_page_pv"></span></span>
</span>
        
      </li>
    </ul>
    <ul>
      
    </ul>
    <ul>
      
    </ul>
    <ul>
      <li>
        <!-- cnzzç»Ÿè®¡ -->
        
        <script type="text/javascript" src='https://s9.cnzz.com/z_stat.php?id=1280147847&amp;web_id=1280147847'></script>
        
      </li>
    </ul>
  </div>
</footer>
      <div class="float_btns">
        <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>

<div class="todark" id="todark">
  <i class="ri-moon-line"></i>
</div>

      </div>
    </main>
    <aside class="sidebar on">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/bird.png" alt="å¤œèºæ‚ åŸ"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">ä¸»é¡µ</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">å½’æ¡£</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">åˆ†ç±»</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">æ ‡ç­¾</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories/%E7%9B%B8%E5%86%8C">ç›¸å†Œ</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/photos">å£çº¸</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/friends">ç¤¾äº¤</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/about/me">å…³äºæˆ‘</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/about/site">å…³äºåšå®¢</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="æœç´¢">
        <i class="ri-search-line"></i>
      </a>
      
      
      <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
        <i class="ri-rss-line"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>æ„Ÿè°¢æ‚¨çš„æ”¯æŒğŸ˜Š</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="https://cdn.jsdelivr.net/gh/payiz-asj/CDN/images/alipay.png">
      <span class="reward-type">æ”¯ä»˜å®</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="https://cdn.jsdelivr.net/gh/payiz-asj/CDN/images/wechatpay.png">
      <span class="reward-type">å¾®ä¿¡</span>
    </div>
    
  </div>
</div>
    
<script src="/js/jquery-2.0.3.min.js"></script>
 
<script src="/js/lazyload.min.js"></script>

<!-- Tocbot -->
 
<script src="/js/tocbot.min.js"></script>

<script>
  tocbot.init({
    tocSelector: ".tocbot",
    contentSelector: ".article-entry",
    headingSelector: "h1, h2, h3, h4, h5, h6",
    hasInnerContainers: true,
    scrollSmooth: true,
    scrollContainer: "main",
    positionFixedSelector: ".tocbot",
    positionFixedClass: "is-position-fixed",
    fixedSidebarOffset: "auto",
  });
</script>

<script src="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.js"></script>
<link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.css"
/>
<script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js"></script>

<script src="/dist/main.js"></script>

<!-- ImageViewer -->
 <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css">
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // sliderå±•å¼€çŠ¶æ€
                // todo: è¿™æ ·ä¸å¥½ï¼Œåé¢æ”¹æˆçŠ¶æ€
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // è·å¾—åŸå›¾å°ºå¯¸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script> 
<!-- MathJax -->

<!-- Katex -->

<!-- busuanzi  -->
 
<script src="/js/busuanzi-2.3.pure.min.js"></script>
 
<!-- ClickLove -->
 
<script src="/js/clickLove.js"></script>
 
<!-- ClickBoom1 -->

<!-- ClickBoom2 -->

<!-- CodeCopy -->
 
<link rel="stylesheet" href="/css/clipboard.css">
 <script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
<script>
  function wait(callback, seconds) {
    var timelag = null;
    timelag = window.setTimeout(callback, seconds);
  }
  !function (e, t, a) {
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '<i class="ri-file-copy-2-line"></i><span>COPY</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      $(".article pre code").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        let $btn = $(e.trigger);
        $btn.addClass('copied');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-checkbox-circle-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPIED';
        
        wait(function () { // ç­‰å¾…ä¸¤ç§’é’Ÿåæ¢å¤
          $icon.removeClass('ri-checkbox-circle-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
      clipboard.on('error', function(e) {
        e.clearSelection();
        let $btn = $(e.trigger);
        $btn.addClass('copy-failed');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-time-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPY FAILED';
        
        wait(function () { // ç­‰å¾…ä¸¤ç§’é’Ÿåæ¢å¤
          $icon.removeClass('ri-time-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
    }
    initCopyCode();
  }(window, document);
</script>
 
<!-- CanvasBackground -->

<script>
  if (window.mermaid) {
    mermaid.initialize({ theme: "forest" });
  }
</script>


    
  </div>
</body>

</html>